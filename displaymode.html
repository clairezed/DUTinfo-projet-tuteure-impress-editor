<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=1024"/>
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <title>Display mode</title>
        <link rel="stylesheet" type="text/css" href="css/displaymode.css" >
        <!--<script type="text/javascript" src="js/jquery-ui.js"></script>-->
        <script type="text/javascript" src="js/plugin/mustache.js"></script>

        <script type="text/javascript" src="js/plugin/jquery.js"></script>
        
        <!--Pour la fonction goAutoAlign-->
        <script type="text/javascript" src="js/treeToPresentation.js"></script>  

    </head>
    <body>
        
        <!--Kiki : je me suis permis de modifier l'id parce que displaymode partage une fonction avec l'Ã©diteur (la fonction autoAlign-->
        <div id="slideArea">
        </div>


<!--        <script id="templateJmpress" type="text/template">
            {{#slide}}
            <div id={{id}} class='step slide' data-x = '{{pos.x}}' data-y = '{{pos.y}}' data-z = '{{pos.z}}'  data-rotate-x='{{rotate.x}}' data-rotate-y='{{rotate.y}}' data-rotate-z='{{rotate.z}}' data-scale = '{{scale}}' > 
            {{title}}
            {{#element}} 
            <{{hierarchy}} id={{id}} class='element' style='position: absolute; left: {{pos.x}}px; top: {{pos.y}}px'> {{content}}</{{hierarchy}}>  
            {{/element}} 
            </div>   
            {{/slide}}
        </script>-->
        <script id="templateJmpress" type="text/template">
            {{#slide}}
            <div id={{id}} class='step slide' data-x = '{{pos.x}}' data-y = '{{pos.y}}' data-z = '{{pos.z}}'  data-rotate-x='{{rotate.x}}' data-rotate-y='{{rotate.y}}' data-rotate-z='{{rotate.z}}' data-scale = '{{scale}}' > 
            
            {{#element}} 
             <div id={{id}} class='element' style='position: relative; left: {{pos.x}}px; top: {{pos.y}}px' > <span class={{hierarchy}} >{{content}}</span> </div>

            {{/element}} 
            </div>   
            {{/slide}}
        </script>

        <script type="text/javascript" src="js/plugin/jmpress.js"></script>
        
        <script type="text/javascript">
            /*var config = {
                viewPort:{
                    width:1000,
                    height:true
                }
            };*/
            var pressjson = JSON.parse(localStorage.getItem('outputjson'));
            var template = $('#templateJmpress').html();
            var html = Mustache.to_html(template, pressjson);
            //            alert(html);        //ne pas commenter car le jmpress ne fonctionne pas sans
            $('#slideArea').append(html);         
            $('#slideArea').jmpress( {
                    viewport : {
                    height : 2000} });
           
            goAutoAlign();
            
            
          
        </script>

    </body>
</html>